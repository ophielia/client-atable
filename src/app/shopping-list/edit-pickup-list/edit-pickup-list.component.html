<div class="container" *ngIf="shoppingList">
  <div class="row page-title list-text-color">Edit {{shoppingList.list_type}}</div>
  <div class="row">
    <div class="col-9" style="padding-left:0px;">

      <div class="row menubar list-menubar-text-color list-color justify-content-between">
        <div style="float:left">
          <div class="input-group searchbox-group" style="max-width:135px;">
            <at-tag-select aria-describedby="filter-query"
                           [tagTypes]="'Ingredient,NonEdible'"
                           [selectType]="'Assign'"
                           [allowAdd]="true"
                           [showCancelButton]="true"
                           [addOverlayClass]="darker-menu-color"
                           [showText]="'Add Item'"
                           [passedInputStyle]="'menubar-input'"
                           [tagList]="alltags"
                           (tagSelected)="addTagToList($event)">
            </at-tag-select>
          </div>
        </div>
        <div class=" add-button-md main-color" (click)="clearList()">
          Clear List
        </div>
      </div>


      <div class="row justify-content-between" style="margin-left:0px">
        <div *ngFor="let category of shoppingList.categories, let i = index" class="col-12">
          <div class="content-panel legend-1-outline category-light col " style="margin-right:2px">
            <div class="clearfix" *ngIf="i % 2 == 0"></div>
            <!--<div class="row {{getCategoryDispClass('list-color',category)}} justify-content-center"> {{category.name}}
            </div>-->

            <at-shopping-list-items [category]="category" [legendMap]="listLegend"
                                    [showItemLegends]="showItemLegends" [listId]="shoppingList.list_id"
                                    (listUpdated)="getShoppingList(shoppingList.list_id)"></at-shopping-list-items>

          </div>
        </div>
      </div>


    </div>
    <div class="col-3">
      <div
        class="row menu-color menubar-flush-top justify-content-end">

        <div class="icon-button" (click)="toggleMenu()"><span class="fa-ellipsis-v fa"></span></div>
      </div>
      <div *ngIf="showMenu"
           class="row dish-menubar-text-color menubar-flush-middle dish-menu-dropdown-color justify-content-end {{showAddDish?'':'broken-list-fix'}}">
        <div class="col">
          <div *ngIf="!showAddDish" class="row justify-content-end text-menu-link" (click)="toggleAddDish()">Add Dish
          </div>
          <div *ngIf="showAddDish" class="row justify-content-end text-menu-link">
            <at-dish-select class="at-tag-select-style"
                            [showCancelButton]="true"
                            [showText]="'Select Dish'"
                            [passedInputStyle]="'menubar-input'"
                            [dishList]="allDishes"
                            (dishSelected)="addDishToList($event)"
                            (cancelSelectDish)="toggleAddDish()"></at-dish-select>
          </div>

        </div>
      </div>
      <div *ngIf="showMenu"
           class="row dish-menubar-text-color menubar-flush-middle dish-menu-dropdown-color justify-content-end"
           (click)="shopWithThisList()">Shop!
      </div>
    </div>
  </div>


  <app-modal #modal1 [autoHide]="0" (modalResult)="processModalSelection($event)">
    <div class="app-modal-body">
      There's an active list already!
      <div>
        <button class="buttonclick" value="add">Add to List</button>
        <button class="buttonclick" value="replace">Replace List</button>
      </div>
    </div>

  </app-modal>
</div>
